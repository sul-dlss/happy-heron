<% content_for :breadcrumbs do %>
  <%= render BreadcrumbNavComponent.new(admin: true, breadcrumbs: [{ title: 'Generate a sunetid report for a list of druids' }]) %>
<% end %>
<main id="content">
  <div class="container" id="dashboard">
    <h1>Generate SUNETID report</h1>

    <%= render Admin::NavigationComponent.new %>

    <div class="row">
      <%= form_with model: @report, url: new_admin_sunetid_report_path, method: :get, class: 'mt-3' do |form| %>
        <h2>Provide a list of druids:</h2>
        <%= form.label :druids, 'Enter one DRUID per line:' %>
        <%= form.text_area :druids, class: 'form-control', size: '10x10' %>
        <%= form.submit 'Search', class: 'btn btn-primary my-3' %>
      <% end %>

      <% if @results&.empty? %>
        <h4 class="text-danger">No results</h4>
      <% elsif @results&.any? %>
        <%= form_with model: @report, url: admin_sunetid_reports_path, data: { turbo: false } do |form| %>
          <%= form.hidden_field :druids %>
          <%= form.submit 'Download', class: 'btn btn-success my-3' %>
        <% end %>
      <% end %>
    </div>
  </div>
</main>
