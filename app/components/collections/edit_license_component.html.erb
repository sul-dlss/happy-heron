  <section id="terms" data-controller="complex-radio custom-rights" aria-describedby="popover-collection.terms">
    <header>Terms of use and license * <%= render PopoverComponent.new key: "collection.terms" %></header>

    <p>
      We highly recommend every deposit be assigned a license when possible. A
      license helps others who access the content to understand what the
      Depositor is allowing them to do with the work and under what
      conditions.
    </p>

    <fieldset class="license-option">
      <div class="form-check<%= " is-invalid" if error? %>" data-complex-radio-target="selection">
        <%= form.radio_button :license_option, "required", class: "form-check-input", data: {action: "complex-radio#disableUnselectedInputs"} %>
        <%= form.label :license_option_required, "Require license for all deposits", class: "form-check-label" %>
        <%= form.label :required_license, class: "form-check-label visually-hidden" %>
        <%= form.select :required_license, grouped_options_for_select(License.grouped_options, required_license),
              {prompt: "Select..."}, required: true, class: "form-select#{" is-invalid" if error?}" %>
        <%= link_to "Get help selecting a license", Settings.external_links.license_help, target: "_blank" %>
      </div>

      <div class="form-check<%= " is-invalid" if error? %>" data-complex-radio-target="selection">
        <%= form.radio_button :license_option, "depositor-selects", class: "form-check-input", data: {action: "complex-radio#disableUnselectedInputs"} %>
        <%= form.label "license_option_depositor-selects", "Depositor selects license", class: "form-check-label" %>
        <%= form.label :default_license, class: "form-check-label visually-hidden" %>
        <%= form.select :default_license, grouped_options_for_select(License.grouped_options, default_license),
              {include_blank: "Select default license..."}, required: true, class: "form-select default_license#{" is-invalid" if error?}" %>
      </div>

      <div class="invalid-feedback"><%= error_message %></div>
    </fieldset>

    <hr>

    <p>
      In addition to the license chosen, the following Terms of Use will also be displayed on your PURL page:
    </p>

    <p class="terms-of-use">
      <%= Settings.access.use_and_reproduction_statement %>
    </p>

    <hr>

    <p>
      The option below will allow you either to:
    </p>

    <ol>
      <li>Provide a custom use statement that will appear on every deposit in this collection or</li>
      <li>allow depositors to enter a custom use statement, typically one required by a publisher in order to deposit an Open Access version of an article.</li>
    </ol>

    <p>
      You will also be able to provide custom instructions for this field if you wish.
    </p>

    <fieldset>
      <p>
        Include custom use statement?
      </p>

      <div class="ms-2">
        <div class="form-check<%= " is-invalid" if error? %>">
          <%= form.radio_button :allow_custom_rights_statement, false, class: "form-check-input", data: {action: "custom-rights#updateChooseCustomRightsFieldsetEnabled", custom_rights_target: "noIncludeCustomRightsRadioButton"} %>
          <%= form.label :allow_custom_rights_statement_false, "No", class: "form-check-label" %>
        </div>
        <div class="form-check<%= " is-invalid" if error? %>">
          <%= form.radio_button :allow_custom_rights_statement, true, class: "form-check-input", data: {action: "custom-rights#updateChooseCustomRightsFieldsetEnabled", custom_rights_target: "yesIncludeCustomRightsRadioButton"} %>
          <%= form.label :allow_custom_rights_statement_true, "Yes", class: "form-check-label" %>
        </div>

        <fieldset data-custom-rights-target="customRightsConfigFieldset">
          <div class="ms-4">
            <div class="form-check<%= " is-invalid" if error? %>">
              <%= form.radio_button :custom_rights_statement_source_option, "provided_by_collection", checked: (custom_rights_statement_source_option == "provided_by_collection"), class: "form-check-input", data: {action: "custom-rights#updateCustomRightsInstructionsFieldsetEnabled", custom_rights_target: "customRightsSourceIsCollectionButton"} %>
              <%= form.label :custom_rights_statement_source_option_provided_by_collection, "Provide specific terms", class: "form-check-label pe-2" %>
              <%= form.text_area :provided_custom_rights_statement, cols: "55", rows: "1" %>
              <%# TODO: text area needs a label %>
            </div>
            <div class="form-check<%= " is-invalid" if error? %>">
              <%= form.radio_button :custom_rights_statement_source_option, "entered_by_depositor", checked: (custom_rights_statement_source_option == "entered_by_depositor"), class: "form-check-input", data: {action: "custom-rights#updateCustomRightsInstructionsFieldsetEnabled", custom_rights_target: "customRightsSourceIsDepositorButton"} %>
              <%= form.label :custom_rights_statement_source_option_entered_by_depositor, "Allow depositor to enter their own terms", class: "form-check-label" %>
            </div>

            <div class="ms-4">
              <fieldset data-custom-rights-target="customRightsInstructionsFieldset">
                <header class="fs-5">
                  Use default instructions?
                </header>
                <div class="form-check<%= " is-invalid" if error? %>">
                  <%= form.radio_button :custom_rights_instructions_source_option, "default_instructions", checked: (custom_rights_instructions_source_option == "default_instructions"), class: "form-check-input" %>
                  <%= form.label :custom_rights_instructions_source_option_default_instructions, "Yes, display the following instructions", class: "form-check-label" %>
                  <p class="terms-of-use">
                    <%= Settings.access.default_instructions_for_custom_use_statement %>
                  </p>
                </div>
                <div class="form-check<%= " is-invalid" if error? %>">
                  <%= form.radio_button :custom_rights_instructions_source_option, "provided_by_collection", checked: (custom_rights_instructions_source_option == "provided_by_collection"), class: "form-check-input" %>
                  <%= form.label :custom_rights_instructions_source_option_provided_by_collection, "No, display these instructions", class: "form-check-label pe-2" %>
                  <%= form.text_area :custom_rights_statement_custom_instructions, cols: "55", rows: "1" %>
                  <%# TODO: text area needs a label %>
                </div>
              </fieldset>
            </div>
          </div>
        </fieldset>
      </div>
    </fieldset>
  </section>
