#!/usr/bin/env ruby
# frozen_string_literal: true

# Usage:
# SETTINGS__SDR_API__URL=https://sdr-api-stage.stanford.edu \
# SETTINGS__SDR_API__EMAIL=jcoyne85@stanford.edu \
# SETTINGS__SDR_API__PASSWORD=sekret! \
# bin/migrate-collections

require_relative '../config/environment'
COLLECTION_LIST = ['druid:vq434wh5503']

def login
  SdrClient::Login.run(url: Settings.sdr_api.url, login_service: BaseDepositJob::LoginFromSettings)
end

login

COLLECTION_LIST.each do |druid|
  result = SdrClient::Find.run(druid, url: Settings.sdr_api.url)
  puts "result: #{result}"
  json = JSON.parse(result)
  puts json['externalIdentifier']
end
